.ce-block {
  &.ce-block--selected {
    > .ce-block__content {
      background-color: $current-line;
    }
  }

  > .ce-block__content {
    * {
      color: $foreground;
    }
  }

  > .ce-block__content[data-sources]::after {
    transform: translateY(-0.2em);
    content: "\21E7 References linked to this block";
    color: $current-line;
  }

  .tc-popover.tc-popover--opened {
    background-color: $background;

    .tc-popover__item {
      &:not(:hover) {
        background-color: $background !important;

        svg,
        svg * {
          fill: $background !important;
        }
      }
      &:hover {
        background-color: $current-line !important;

        svg,
        svg * {
          fill: $current-line !important;
        }
      }
    }
  }

  .tc-cell {
    background-color: $background;

    &.tc-cell--selected {
      background-color: $current-line !important;
    }
  }

  .tc-toolbox__toggler {
    > svg {
      > rect:first-child {
        fill: $current-line !important;
      }
    }

    &:not(:hover) {
      > svg {
        > circle {
          fill: $background;
        }
      }
    }
    &:hover {
      > svg {
        > circle {
          fill: $purple;
        }
      }
    }
  }
}

.ce-toolbar--opened {
  background-color: $background;
}

.ce-toolbox--opened,
.ce-toolbar__settings-btn,
.ce-toolbar__plus {
  background-color: $current-line !important;
  border-radius: $rad !important;

  &:not(:hover) > svg {
    fill: $background !important;
  }
  &:hover > svg {
    fill: $purple !important;
  }
}

.tc-add-row,
.tc-add-column {
  &:not(:hover) {
    background-color: $background !important;

    > svg {
      fill: $foreground !important;
    }
  }

  &:hover {
    background-color: $current-line !important;
  }
  &::before,
  &::after {
    background-color: transparent !important;
  }

  &:hover > svg {
    fill: $purple !important;
  }
}

.ce-toolbox__button:not(.ce-toolbox__button--active, :hover) {
  &:not(:hover) > svg {
    fill: $background !important;
  }
}
.ce-toolbox__button {
  &.ce-toolbox__button--active,
  &:hover {
    > svg {
      fill: $purple !important;
    }
  }
}

.ce-settings {
  background-color: $current-line;
  border: {
    width: 2px;
    style: solid;
    color: $background;
    radius: $rad;
  }

  svg {
    fill: $background;
  }

  .cdx-settings-button:hover,
  .ce-settings__button.ce-settings__button--focused,
  .ce-settings__button:hover {
    background-color: $current-line !important;
    border-color: $purple !important;
    svg {
      fill: $purple;
    }
  }

  .ce-settings__button--delete.ce-settings__button--confirm {
    &:not(:hover) {
      background-color: transparent !important;
      > svg {
        fill: $red !important;
      }
    }

    &:hover {
      background-color: $red !important;
      > svg {
        fill: $foreground !important;
      }
    }
  }
}

.tc-table,
.tc-table *,
.tc-add-column,
.tc-add-row,
.ce-toolbar--opened {
  border-color: $foreground !important;
}

.table-cell {
  background-color: $background;
  border-color: $current-line;
}

.ce-toc {
  &::before {
    content: 'Table of Contents: "';
  }

  &::after {
    content: '"';
  }
}

.ce-references {
  &::before {
    content: 'References: "';
  }

  &::after {
    content: '"';
  }
}

.ce-toc,
.ce-references {
  &::before,
  &::after {
    color: rgba($foreground, 0.5) !important;
  }
  text-decoration: underline dotted rgba($foreground, 0.5) 1px !important;
}

.codeBoxSelectDiv {
  border: {
    width: 2px;
    style: solid;
    radius: $rad;
  }

  &:not(:hover) {
    border-color: $current-line;
  }

  &:hover {
    border-color: $purple;
  }

  .codeBoxSelectInput,
  .codeBoxSelectDropIcon {
    background-color: transparent;
  }

  .codeBoxSelectPreview {
    background-color: $darker;
    border: {
      width: 2px;
      style: solid;
      color: $current-line;
      radius: $rad;
    }

    .codeBoxSelectItem {
      &:not(:hover) {
        background-color: $darker;
      }

      &:hover {
        background-color: $current-line;
        color: white !important;
        opacity: 1 !important;
      }
    }
  }
}

@import "editor-sources";
